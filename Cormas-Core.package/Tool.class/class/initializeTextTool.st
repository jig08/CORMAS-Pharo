tool states
initializeTextTool
	"This method was automatically generated by the HotDraw ToolStateMachineEditor.
	To edit this method, evaluate the comment below"
	"| states transitions stateTable |
	states := ((Core.OrderedCollection new) add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Text Tool'; instVarAt: 3 put: (Text string: '[:tool :event | 
tool valueAt: #canCreate put: false]' runs: (Core.RunArray runs: #(53) values: #(nil))); instVarAt: 4 put: (Core.Point x: 87 y: 41); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Select Text Figure'; instVarAt: 3 put: (Text string: '[:tool :event | 
| figure startIndex |
figure := tool figureAtEvent: event.
tool drawing selection: figure.
tool valueAt: #figure put: figure.
startIndex := figure indexForPoint: (tool cursorPointFor: event).
tool valueAt: #startIndex put: startIndex.
figure setIndices: (startIndex to: startIndex)]' runs: (Core.RunArray runs: #(299) values: #(nil))); instVarAt: 4 put: (Core.Point x: 60 y: 173); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Highlight Text'; instVarAt: 3 put: (Text string: '[:tool :event | 
| figure newIndex startIndex |
figure := tool valueAt: #figure.
startIndex := tool valueAt: #startIndex.
newIndex := figure indexForPoint: (tool cursorPointFor: event).
figure setIndices: 
	((newIndex min: startIndex) to: (newIndex max: startIndex))]' runs: (Core.RunArray runs: #(267) values: #(nil))); instVarAt: 4 put: (Core.Point x: 59 y: 243); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Text Figure Selected'; instVarAt: 3 put: (Text string: '[:tool :event | ]' runs: (Core.RunArray runs: #(17) values: #(nil))); instVarAt: 4 put: (Core.Point x: 276 y: 242); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Text Figure Creation Tool'; instVarAt: 3 put: (Text string: '[:tool :event | 
tool valueAt: #canCreate put: true]' runs: (Core.RunArray runs: #(52) values: #(nil))); instVarAt: 4 put: (Core.Point x: 273 y: 27); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Create Text'; instVarAt: 3 put: (Text string: '[:tool :event | 
| figure |
(tool valueAt: #canCreate) 
	ifTrue: 
		[figure := TextFigure string: '''' 
				at: (tool cursorPointFor: event).
		figure setIndices: (1 to: 1).
		tool drawing add: figure; selection: figure.
		tool valueAt: #figure put: figure] 
	ifFalse: 
		[tool changeToState: (Tool stateFor: ''End State'') 
			event: event]]' runs: (Core.RunArray runs: #(276 61 1) values: #(nil #bold nil))); instVarAt: 4 put: (Core.Point x: 375 y: 109); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Edit Text Figure'; instVarAt: 3 put: '[:tool :event | 
(tool valueAt: #figure) respondToEvent: event]'; instVarAt: 4 put: (Core.Point x: 303 y: 312); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (Refactory.HotDraw.ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Menu'; instVarAt: 3 put: '[:tool :event | ]'; instVarAt: 4 put: (Core.Point x: 316 y: 369); instVarAt: 5 put: false; instVarAt: 6 put: true; yourself); yourself).
	stateTable := Dictionary new.
	states do: [:each | stateTable at: each name put: each].

	transitions := OrderedCollection new.
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Tool'); to: (stateTable at: 'Select Text Figure'); type: (Refactory.HotDraw.FigureTransitionType basicNew instVarAt: 1 put: #redButtonPress; instVarAt: 2 put: ((Core.Array new: 1) at: 1 put: Refactory.HotDraw.TextFigure; yourself); yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 117.0 y: 68.625); add: (Core.Point x: 117.0 y: 172.185); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Select Text Figure'); to: (stateTable at: 'Highlight Text'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #mouseMove; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 114.375 y: 200.625); add: (Core.Point x: 105.146 y: 242.338); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Highlight Text'); to: (stateTable at: 'Highlight Text'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #mouseMove; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 106.062 y: 270.625); add: (Core.Point x: 117 y: 311); add: (Core.Point x: 90 y: 318); add: (Core.Point x: 90.625 y: 269.812); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Highlight Text'); to: (stateTable at: 'Text Figure Selected'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 146.563 y: 256.0); add: (Core.Point x: 172 y: 256); add: (Core.Point x: 274.88 y: 255.992); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Select Text Figure'); to: (stateTable at: 'Text Figure Selected'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 164.125 y: 193.875); add: (Core.Point x: 200 y: 206); add: (Core.Point x: 301.494 y: 242.711); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Selected'); to: (stateTable at: 'Select Text Figure'); type: (Refactory.HotDraw.FigureTransitionType basicNew instVarAt: 1 put: #redButtonPress; instVarAt: 2 put: ((Core.Array new: 1) at: 1 put: Refactory.HotDraw.TextFigure; yourself); yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 326.477 y: 241.367); add: (Core.Point x: 260 y: 161); add: (Core.Point x: 173.187 y: 185.047); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Creation Tool'); to: (stateTable at: 'Create Text'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 358.75 y: 53.8125); add: (Core.Point x: 400.34 y: 108.138); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Creation Tool'); to: (stateTable at: 'Select Text Figure'); type: (Refactory.HotDraw.FigureTransitionType basicNew instVarAt: 1 put: #redButtonPress; instVarAt: 2 put: ((Core.Array new: 1) at: 1 put: Refactory.HotDraw.TextFigure; yourself); yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 324.625 y: 53.8125); add: (Core.Point x: 140.45 y: 172.069); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Create Text'); to: (stateTable at: 'Text Figure Selected'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 405.25 y: 136.344); add: (Core.Point x: 348.447 y: 241.175); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Selected'); to: (stateTable at: 'Create Text'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 383.305 y: 244.375); add: (Core.Point x: 422 y: 165); add: (Core.Point x: 418.5 y: 135.812); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Edit Text Figure'); to: (stateTable at: 'Edit Text Figure'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #keyPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 402.516 y: 326.906); add: (Core.Point x: 425 y: 331); add: (Core.Point x: 425 y: 351); add: (Core.Point x: 389.812 y: 335.313); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Selected'); to: (stateTable at: 'Edit Text Figure'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #keyPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 342.25 y: 269.625); add: (Core.Point x: 349.879 y: 311.338); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Edit Text Figure'); to: (stateTable at: 'Select Text Figure'); type: (Refactory.HotDraw.FigureTransitionType basicNew instVarAt: 1 put: #redButtonPress; instVarAt: 2 put: ((Core.Array new: 1) at: 1 put: Refactory.HotDraw.TextFigure; yourself); yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 309.109 y: 333.578); add: (Core.Point x: 179 y: 367); add: (Core.Point x: 52 y: 312); add: (Core.Point x: 75.2187 y: 196.875); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Edit Text Figure'); to: (stateTable at: 'Create Text'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 393.944 y: 316.433); add: (Core.Point x: 433 y: 272); add: (Core.Point x: 433.094 y: 134.656); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Edit Text Figure'); to: (stateTable at: 'Menu'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 348.75 y: 339.625); add: (Core.Point x: 339.305 y: 368.082); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Selected'); to: (stateTable at: 'Menu'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 335.75 y: 269.625); add: (Core.Point x: 256 y: 294); add: (Core.Point x: 226 y: 339); add: (Core.Point x: 259 y: 388); add: (Core.Point x: 315.109 y: 385.047); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Figure Creation Tool'); to: (stateTable at: 'Menu'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 421.516 y: 44.6484); add: (Core.Point x: 483 y: 57); add: (Core.Point x: 508 y: 203); add: (Core.Point x: 491 y: 390); add: (Core.Point x: 357 y: 389); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Text Tool'); to: (stateTable at: 'Menu'); type: (Refactory.HotDraw.TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((Core.OrderedCollection new) add: (Core.Point x: 96.0 y: 64.5); add: (Core.Point x: 29 y: 142); add: (Core.Point x: 22 y: 273); add: (Core.Point x: 37 y: 385); add: (Core.Point x: 105 y: 402); add: (Core.Point x: 180 y: 401); add: (Core.Point x: 318.25 y: 389.5); yourself); yourself).
	ToolStateMachineEditor openWithStates: states connections: transitions"
	
	Tool states
		at: 'Text Tool'
		put:
			(ToolState
				name: 'Text Tool'
				command: [:tool :event | tool valueAt: #canCreate put: false]).
	Tool states
		at: 'Select Text Figure'
		put:
			(ToolState
				name: 'Select Text Figure'
				command:
					[:tool :event | 
					| figure startIndex |
					figure := tool figureAtEvent: event.
					tool drawing selection: figure.
					tool valueAt: #figure put: figure.
					startIndex := figure indexForPoint: (tool cursorPointFor: event).
					tool valueAt: #startIndex put: startIndex.
					figure setIndices: (startIndex to: startIndex)]).
	Tool states
		at: 'Highlight Text'
		put:
			(ToolState
				name: 'Highlight Text'
				command:
					[:tool :event | 
					| figure newIndex startIndex |
					figure := tool valueAt: #figure.
					startIndex := tool valueAt: #startIndex.
					newIndex := figure indexForPoint: (tool cursorPointFor: event).
					figure
						setIndices:
							((newIndex min: startIndex) to: (newIndex max: startIndex))]).
	Tool states
		at: 'Text Figure Selected'
		put:
			(ToolState
				name: 'Text Figure Selected'
				command: [:tool :event | ]).
	Tool states
		at: 'Text Figure Creation Tool'
		put:
			(ToolState
				name: 'Text Figure Creation Tool'
				command: [:tool :event | tool valueAt: #canCreate put: true]).
	Tool states
		at: 'Create Text'
		put:
			(ToolState
				name: 'Create Text'
				command:
					[:tool :event | 
					| figure |
					(tool valueAt: #canCreate)
						ifTrue:
							[figure := TextFigure
								string: ''
								at: (tool cursorPointFor: event).
							figure setIndices: (1 to: 1).
							(tool drawing)
								add: figure;
								selection: figure.
							tool valueAt: #figure put: figure]
						ifFalse:
							[tool
								changeToState: (Tool stateFor: 'End State')
								event: event]]).
	Tool states
		at: 'Edit Text Figure'
		put:
			(ToolState
				name: 'Edit Text Figure'
				command: [:tool :event | (tool valueAt: #figure) respondToEvent: event]).
	(Tool stateFor: 'Text Tool')
		redButtonPress:
			((FigureTransitionTable new)
				on: TextFigure
					goto: (Tool stateFor: 'Select Text Figure');
				yourself).
	(Tool stateFor: 'Text Tool')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself).
	(Tool stateFor: 'Create Text')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Text Figure Selected');
				yourself).
	(Tool stateFor: 'Edit Text Figure')
		redButtonPress:
			((FigureTransitionTable new)
				on: TextFigure
					goto: (Tool stateFor: 'Select Text Figure');
				goto: (Tool stateFor: 'Create Text');
				yourself).
	(Tool stateFor: 'Edit Text Figure')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself).
	(Tool stateFor: 'Edit Text Figure')
		keyPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Edit Text Figure');
				yourself).
	(Tool stateFor: 'Highlight Text')
		mouseMove:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Highlight Text');
				yourself).
	(Tool stateFor: 'Highlight Text')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Text Figure Selected');
				yourself).
	(Tool stateFor: 'Text Figure Creation Tool')
		redButtonPress:
			((FigureTransitionTable new)
				on: TextFigure
					goto: (Tool stateFor: 'Select Text Figure');
				goto: (Tool stateFor: 'Create Text');
				yourself).
	(Tool stateFor: 'Text Figure Creation Tool')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself).
	(Tool stateFor: 'Text Figure Selected')
		redButtonPress:
			((FigureTransitionTable new)
				on: TextFigure
					goto: (Tool stateFor: 'Select Text Figure');
				goto: (Tool stateFor: 'Create Text');
				yourself).
	(Tool stateFor: 'Text Figure Selected')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself).
	(Tool stateFor: 'Text Figure Selected')
		keyPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Edit Text Figure');
				yourself).
	(Tool stateFor: 'Select Text Figure')
		mouseMove:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Highlight Text');
				yourself).
	(Tool stateFor: 'Select Text Figure')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Text Figure Selected');
				yourself)