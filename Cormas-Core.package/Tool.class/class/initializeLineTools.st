tool states
initializeLineTools
	"This method was automatically generated by the HotDraw ToolStateMachineEditor.
	To edit this method, evaluate the comment below"
	"| states transitions stateTable |
	states := ((OrderedCollection new) add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Polyline Tool'; instVarAt: 3 put: (Text string: '[:tool :event | 
tool valueAt: #class put: PolylineFigure.
tool cursor: Cursor crossHair]' runs: (RunArray runs: #(89) values: #(nil))); instVarAt: 4 put: (Point x: 34 y: 18); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Pressed Line Tool'; instVarAt: 3 put: (Text string: '[:tool :event | 
| figure point |
point := tool cursorPointFor: event.
figure := (tool valueAt: #class) createAt: point.
tool valueAt: #figure put: figure.
tool drawing add: figure]' runs: (RunArray runs: #(181) values: #(nil))); instVarAt: 4 put: (Point x: 110 y: 129); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Move Line'; instVarAt: 3 put: (Text string: '[:tool :event | 
(tool valueAt: #figure) stopPoint: (tool cursorPointFor: event)]' runs: (RunArray runs: #(81) values: #(nil))); instVarAt: 4 put: (Point x: 134 y: 255); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Line Tool End State'; instVarAt: 3 put: '[:tool :event | ]'; instVarAt: 4 put: (Point x: 31 y: 364); instVarAt: 5 put: true; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Add Point to Line (Tool)'; instVarAt: 3 put: (Text string: '[:tool :event | 
(tool valueAt: #figure) addPoint: (tool cursorPointFor: event)]' runs: (RunArray runs: #(80) values: #(nil))); instVarAt: 4 put: (Point x: 324 y: 341); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Spline Tool'; instVarAt: 3 put: (Text string: '[:tool :event | 
tool valueAt: #class put: SplineFigure.
tool cursor: Cursor crossHair]' runs: (RunArray runs: #(87) values: #(nil))); instVarAt: 4 put: (Point x: 240 y: 19); instVarAt: 5 put: false; instVarAt: 6 put: false; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Menu'; instVarAt: 3 put: '[:tool :event | ]'; instVarAt: 4 put: (Point x: 418 y: 97); instVarAt: 5 put: false; instVarAt: 6 put: true; yourself); add: (ToolStateModel basicNew instVarAt: 1 put: nil; instVarAt: 2 put: 'Cancel Figure Creation'; instVarAt: 3 put: '[:tool :event | ]'; instVarAt: 4 put: (Point x: 384 y: 151); instVarAt: 5 put: false; instVarAt: 6 put: true; yourself); yourself).
	stateTable := Dictionary new.
	states do: [:each | stateTable at: each name put: each].

	transitions := OrderedCollection new.
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Polyline Tool'); to: (stateTable at: 'Pressed Line Tool'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 87 y: 48); add: (Point x: 154 y: 129); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Pressed Line Tool'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #mouseMove; yourself); points: ((OrderedCollection new) add: (Point x: 167 y: 160); add: (Point x: 167 y: 255); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Pressed Line Tool'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((OrderedCollection new) add: (Point x: 191 y: 158); add: (Point x: 247 y: 193); add: (Point x: 182 y: 255); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #mouseMove; yourself); points: ((OrderedCollection new) add: (Point x: 186 y: 256); add: (Point x: 234 y: 225); add: (Point x: 259 y: 242); add: (Point x: 196 y: 260); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((OrderedCollection new) add: (Point x: 142 y: 260); add: (Point x: 41 y: 222); add: (Point x: 24 y: 265); add: (Point x: 134 y: 268); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Line Tool End State'); type: (TransitionType basicNew instVarAt: 1 put: #doubleClick; yourself); points: ((OrderedCollection new) add: (Point x: 144 y: 282); add: (Point x: 96 y: 315); add: (Point x: 93 y: 364); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Line Tool End State'); type: (TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 156 y: 285); add: (Point x: 102 y: 364); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Add Point to Line (Tool)'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 196 y: 280); add: (Point x: 361 y: 342); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Add Point to Line (Tool)'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonRelease; yourself); points: ((OrderedCollection new) add: (Point x: 324 y: 357); add: (Point x: 246 y: 361); add: (Point x: 181 y: 285); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Add Point to Line (Tool)'); to: (stateTable at: 'Move Line'); type: (TransitionType basicNew instVarAt: 1 put: #mouseMove; yourself); points: ((OrderedCollection new) add: (Point x: 391 y: 341); add: (Point x: 334 y: 284); add: (Point x: 202 y: 272); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Spline Tool'); to: (stateTable at: 'Pressed Line Tool'); type: (TransitionType basicNew instVarAt: 1 put: #redButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 257 y: 48); add: (Point x: 181 y: 129); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Spline Tool'); to: (stateTable at: 'Menu'); type: (TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 297 y: 48); add: (Point x: 421 y: 104); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Polyline Tool'); to: (stateTable at: 'Menu'); type: (TransitionType basicNew instVarAt: 1 put: #yellowButtonPress; yourself); points: ((OrderedCollection new) add: (Point x: 116 y: 27); add: (Point x: 254 y: 10); add: (Point x: 404 y: 23); add: (Point x: 421 y: 69); add: (Point x: 432 y: 97); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Add Point to Line (Tool)'); to: (stateTable at: 'Cancel Figure Creation'); type: (CharacterTransitionType new event: #keyPress; characters: (String fromIntegerArray: #[27])); points: ((OrderedCollection new) add: (Point x: 400 y: 341); add: (Point x: 448 y: 182); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Move Line'); to: (stateTable at: 'Cancel Figure Creation'); type: (CharacterTransitionType new event: #keyPress; characters: (String fromIntegerArray: #[27])); points: ((OrderedCollection new) add: (Point x: 202 y: 268); add: (Point x: 366 y: 214); add: (Point x: 407 y: 178); yourself); yourself).
	transitions add: (ToolStateTransitionModel new from: (stateTable at: 'Pressed Line Tool'); to: (stateTable at: 'Cancel Figure Creation'); type: (CharacterTransitionType new event: #keyPress; characters: (String fromIntegerArray: #[27])); points: ((OrderedCollection new) add: (Point x: 224 y: 147); add: (Point x: 261 y: 149); add: (Point x: 389 y: 159); yourself); yourself).
	ToolStateMachineEditor openWithStates: states connections: transitions"
	
	Tool states
		at: 'Polyline Tool'
		put:
			(ToolState
				name: 'Polyline Tool'
				command:
					[:tool :event | 
					tool valueAt: #class put: PolylineFigure.
					tool cursor: Cursor crossHair]).
	Tool states
		at: 'Pressed Line Tool'
		put:
			(ToolState
				name: 'Pressed Line Tool'
				command:
					[:tool :event | 
					| figure point |
					point := tool cursorPointFor: event.
					figure := (tool valueAt: #class) createAt: point.
					tool valueAt: #figure put: figure.
					tool drawing add: figure]).
	Tool states
		at: 'Move Line'
		put:
			(ToolState
				name: 'Move Line'
				command:
					[:tool :event | (tool valueAt: #figure) stopPoint: (tool cursorPointFor: event)]).
	Tool states
		at: 'Line Tool End State'
		put:
			(EndToolState
				name: 'Line Tool End State'
				command: [:tool :event | ]).
	Tool states
		at: 'Add Point to Line (Tool)'
		put:
			(ToolState
				name: 'Add Point to Line (Tool)'
				command:
					[:tool :event | (tool valueAt: #figure) addPoint: (tool cursorPointFor: event)]).
	Tool states
		at: 'Spline Tool'
		put:
			(ToolState
				name: 'Spline Tool'
				command:
					[:tool :event | 
					tool valueAt: #class put: SplineFigure.
					tool cursor: Cursor crossHair]).
	(Tool stateFor: 'Polyline Tool')
		redButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Pressed Line Tool');
				yourself).
	(Tool stateFor: 'Polyline Tool')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself).
	(Tool stateFor: 'Add Point to Line (Tool)')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Add Point to Line (Tool)')
		mouseMove:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Add Point to Line (Tool)')
		keyPress:
			((CharacterTransitionTable new)
				forCharacters: (String fromIntegerArray: #[27])
					goto: (Tool stateFor: 'Cancel Figure Creation');
				yourself).
	(Tool stateFor: 'Pressed Line Tool')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Pressed Line Tool')
		mouseMove:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Pressed Line Tool')
		keyPress:
			((CharacterTransitionTable new)
				forCharacters: (String fromIntegerArray: #[27])
					goto: (Tool stateFor: 'Cancel Figure Creation');
				yourself).
	(Tool stateFor: 'Move Line')
		doubleClick:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Line Tool End State');
				yourself).
	(Tool stateFor: 'Move Line')
		redButtonRelease:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Move Line')
		keyPress:
			((CharacterTransitionTable new)
				forCharacters: (String fromIntegerArray: #[27])
					goto: (Tool stateFor: 'Cancel Figure Creation');
				yourself).
	(Tool stateFor: 'Move Line')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Line Tool End State');
				yourself).
	(Tool stateFor: 'Move Line')
		redButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Add Point to Line (Tool)');
				yourself).
	(Tool stateFor: 'Move Line')
		mouseMove:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Move Line');
				yourself).
	(Tool stateFor: 'Spline Tool')
		redButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Pressed Line Tool');
				yourself).
	(Tool stateFor: 'Spline Tool')
		yellowButtonPress:
			((SimpleTransitionTable new)
				goto: (Tool stateFor: 'Menu');
				yourself)